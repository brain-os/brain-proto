syntax = "proto3";

package com.jio.brain;

option java_multiple_files = true;

import "google/protobuf/timestamp.proto";
import "index.proto";

message BrainQuantity {
  oneof quantity_is_one_of {
    BrainNumericQuantity numeric = 1;
    BrainSymbolicQuantity symbolic = 2;
    BrainOrdinalQuantity ordinal = 3;
    BrainBinnedQuantity binned = 4;
    BrainSpatialQuantity spatial = 5;
    BrainTemporalQuantity temporal = 6;
  }
}

message BrainNumericQuantity {
  oneof numeric_is_one_of {
    float float_value = 1;
    double double_value = 2;
    int32 int_value = 3;
    int64 long_value = 4;
  }
}

message BrainSymbolicQuantity {
  repeated uint32 item = 1;  // one or more symbols from dictionary
}

message BrainOrdinalQuantity {
  repeated uint32 item = 1;  // one or more symbols from dictionary
}

message BrainBinnedQuantity {
  repeated uint32 item = 1;  // one or more symbols from dictionary
}

message BrainSpatialQuantity {
  BrainLatLongQuantity lat_long = 1;
  map<uint32, BrainIndex> type2item = 3;  // one or more id’s
  // key = index of the following types:
  //   - ghohash6, … geohash9
  //   - ward, village, locality, city, district, state, country
  //   - building, campus, stadium, airport, railway, metro, ...
}

message BrainLatLongQuantity {
  float latitude = 1;
  float longitude = 2;
}

// One or more of these can be populated
message BrainTemporalQuantity {
  oneof temporal_is_one_of {
    BrainTemporalInstanceQuantity instance = 1; // which
    BrainTemporalDurationQuantity duration = 2; // how many
    BrainTemporalRangeQuantity range = 3;       // from to to
  }
}

message BrainTemporalInstanceQuantity {
  map<uint32, uint32> value = 1;
}

message BrainTemporalDurationQuantity {
  map<uint32, uint32> value = 1;
}

message BrainTemporalRangeQuantity {
  BrainTemporalInstanceQuantity minimum = 1;
  BrainTemporalInstanceQuantity maximum = 2;
  bool include_minimum = 3; // <= vs. <
  bool include_maximum = 4; // >= vs. >
}

//////////// OLD BELOW ///////////

message Quantity {
  //  string type = 1; // e.g. /qt/count, /qt/temperature, /qt/area, /qt/data, /qt/ram, /qt/frequency
  //  string unit = 2; // e.g. /qu/temperature/celcius, /qu/area/sq_m, /qu/ram/gb, …
  oneof quantity_is_one_of {
    QuantityNumeric numeric = 1;  // e.g. count, temperature, volume, area, etc.
    QuantitySymbolic symbolic = 2;// e.g. color, texture, fit, style, genre, etc.
    QuantityOrdinal ordinal = 3;// e.g. order, size buckets, rating buckets, KPI buckets
    QuantityBinned binned = 4;
    QuantityLocation location = 5;// e.g. LatLong, IPAddress, locality, building, city, district, state.
    QuantityTemporal temporal = 6;// e.g. date, time, date-range, time-range, duration, season.
    QuantityMonetary monetary = 7;// e.g. currency + amount
    QuantityDemographic demographic = 8;  // e.g. age-bucket, gender, income-bucket, etc.
    QuantityBoolean boolean = 9;
  }
}

message QuantityNumeric {
  oneof value_is_one_of {
    float float_value = 3;      // when floating and low precision is enough
    double double_value = 4; // only when high precision is required
    uint64 uint64_value = 5;  // when only positive values are there
    uint32 uint32_value = 6; // when only positive values are there
    sint64 sint64_value = 7;// when positive and negative both are possible
    sint32 sint32_value = 8;// when positive and negative both are possible
  }
}

message QuantitySymbolic {
  uint32 index = 1;    // See Schema for corresponding values
}

message QuantityOrdinal {
  uint32 index = 1;    // See Schema for corresponding values
}

message QuantityBinned {
  uint32 index = 1;    // See Schema for corresponding values
}

message QuantityMonetary {
  double value = 1;
}

message QuantityDemographic {

}

message QuantityLocation {
  LatLong latlong = 1;
  Grid grid = 2;
  string continent = 3; // 7-continents of the world
  string country = 4; // all the countries in the world
  string region = 5;// within a country (country is needed) [e.g. north, north-east, etc.]
  string state = 6;// country is needed
  string district = 7;// country and state are needed
  string city = 8;// country and state are needed
  string village = 9;// country, state, district are needed
  string locality = 10;// country, state, city are needed
  string building = 11;// building-id
  LocationType location_type = 12;
}

enum LocationType {
  LOCATION_TYPE_INVALID = 0;
  LOCATION_TYPE_AT_HOME = 1;
  LOCATION_TYPE_AT_OFFICE = 2;
  // ....
}

message QuantityDistance {
  int32 distance = 1;
}

message LatLong {
  float latitude = 1;
  float longitude = 2;
}

message Grid {
  int64 precesion = 1;
  string value = 2;
}

message QuantityTemporal {
  oneof Quantity_temporal_is_one_of {
    QuantityDate date = 1;
    QuantityTime time = 2;
    QuantityDateTime date_time = 3;
    QuantityDateRange date_range = 4;
    QuantityTimeRange time_range = 5;
    QuantityDuration duration = 6;
    QuantityTimestamp timestamp = 7;
  }
}

message QuantityTimestamp {
  google.protobuf.Timestamp protobufTimestamp = 1;
}

message QuantityDate {
  uint32 year = 1;
  uint32 month = 2;
  uint32 week = 3;
  uint32 day = 4;
  uint32 dow = 5;
}

message QuantityTime {
  uint32 hour = 1;
  uint32 minute = 2;
  uint32 second = 3;
  uint32 millisecond = 4;
}

message QuantityDateTime {
  QuantityDate date = 1;
  QuantityTime time = 2;
}

message QuantityDateRange {
  QuantityDate start_date = 1;
  bool include_start = 2;
  QuantityDate end_date = 3;
  bool include_end = 4;
}

message QuantityTimeRange {
  QuantityTime start_time = 1;
  bool include_start = 2;
  QuantityTime end_time = 3;
  bool include_end = 4;
}

message QuantityDuration {
  uint32 seconds = 1;
  uint32 minutes = 2;
  uint32 hours = 3;
  uint32 days = 4;
  uint32 weeks = 5;
  uint32 quarters = 6;
  uint32 years = 7;
}

message QuantityPolygon {
  repeated LatLong lat_long = 1;
}

enum QuantityBoolean {
  TRUE = 0;
  FALSE = 1;
  NOT_ASSIGNED = 2;
}