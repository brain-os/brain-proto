syntax = "proto3";

package com.jio.fabric;

option java_multiple_files = true;

import "layer0/base.proto";
import "layer0/token.proto";
import "layer1/set.proto";
import "layer1/vector.proto";

message BrainCollectionSchema {
  BrainToken token = 1;
  BrainCollectionType type = 2;
  oneof collection_is_one_of {
    BrainItemCollection item = 3;
    BrainOrderedItemCollection sequence = 4;
  }
}
message BrainItemCollection {
  oneof item_is_one_of {
    BrainSymbolCollection symbol = 1;
    BrainEntityCollection entity = 2;
  }
}
message BrainSymbolCollection {
  oneof set_is_one_of {
    BrainStrSet str_item = 1;
    BrainU64Set u64_item = 2;
  }
}
message BrainEntityCollection {
  uint32 entity_type = 1;// Example condition
  // /common/predicate/city/of_state/state == 'Maharashtra'
  // /common/attribute/city/population > 5000000 // population is attribute of entity city
  string condition = 2;
}
//message BrainConditionalEntitySchema {
//  string entity_type = 1; // /common/entity/city
//  // Example condition
//  // /common/predicate/city/of_state/state == 'Maharashtra'
//  // /common/attribute/city/population > 5000000 // population is attribute of entity city
//  string condition = 2;
//}

message BrainOrderedItemCollection {
  bool modulo = 1;
  oneof sequence_is_one_of {
    BrainStrVector str_item = 2;
    BrainU64Vector u64_item = 3;
  }
}