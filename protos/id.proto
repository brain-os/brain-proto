syntax = "proto3";

package com.jio.fabric;

option java_multiple_files = true;

message BrainId {
  oneof brain_id {
    BrainMetaId meta_id = 1;  // (/m/* …)
    BrainItemId item_id = 2;  //(/i/* …)
  }
}

message BrainMetaId {
  uint32 id = 1;  // machine id
  BrainMetaKey key = 2;  // human readable form
}
/*
key_string below
  <vertical>/meta/<see below>
      collection/<collection>
      quantity/<quantity>
      entity/<entity>
      attribute/<entity>/<attribute>
      attribute_qualifier/<entity>/<attribute>/<qualifier>
      predicate/<subject>/<predicate>/<object>
      predicate_qualifier/<subject>/<predicate>/<object>/<qualifier>
      event/<event>
      process/<process>
 */
message BrainMetaKey {
  string vertical = 1;	// common, retail, telecom, hydrocarbon, media
  string type = 2; // collection, quantity, entity, attribute, attribute_qualifier, predicate, predicate_qualifier, event, process
  string name = 3; // day_of_week, length, tower, azimuth, last_change, mayor_of_city, since, lsr_event, lsr_filter
  string key_string = 4;  // created from vertical, type, and name
}

message BrainItemId {
  uint64 id = 1;  // machine id
  BrainItemKey key = 2;
}

message BrainItemKey {
  string vertical = 1;
  string type = 2;  // entity, collection
  oneof item_key {
    string name = 3;  // single, default key. (e.g. “white”)
    BrainBizKey biz = 4;  // multiple business keys for same entity
  }
  string key_string = 5;
}

message BrainBizKey {
  map<string, string> kv = 3;
}

