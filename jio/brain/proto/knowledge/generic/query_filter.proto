syntax = "proto3";

package jio.brain.proto.knowledge.generic;

option java_package = "com.jio.brain.proto.knowledge.generic";
option java_multiple_files = true;

import "jio/brain/proto/knowledge/commons/quantity.proto";

message FilterValue {
  oneof filter_value_is_one_of {
    string attribute_name = 1;
    jio.brain.proto.knowledge.commons.Quantity attribute_quantity = 2;
  }
}

enum Comparator {
  COMPARATOR_LT = 0;  // <
  COMPARATOR_LE = 1;  // <=
  COMPARATOR_GT = 2;  // >
  COMPARATOR_GE = 3;  // >=
  COMPARATOR_EQ = 4;  // ==
  COMPARATOR_NE = 5;  // !=
}

message ComparatorFilter {
  Comparator comparator = 1;
  FilterValue lhs = 2;
  FilterValue rhs = 3;
}

message RangeFilter {
  FilterValue lower = 1;
  FilterValue upper = 2;
  bool is_lower_equal = 3;  // false ( and true [
  bool is_upper_equal = 4;  // false ) and true ]
}

message BaseFilter {
  oneof filter_is_one_of {
    RangeFilter range_filter = 1;
    ComparatorFilter comparator_filter = 2;
  }
  bool is_not = 3;
}

message CompoundFilter {
  repeated Filter filter = 1;
}

// [ age > 30 or (a.city = b.city)) or (a.title = b.title) ]
// Check with Ritesh Team

message Filter {
  oneof filter_is_one_of {
    BaseFilter base_filter = 1;
    CompoundFilter compound_and_filter = 2;
    CompoundFilter compound_or_filter = 3;
  }
}

